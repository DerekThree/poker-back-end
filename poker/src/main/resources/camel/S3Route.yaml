- route:
    id: s3Route
    from:
      uri: direct:s3Files
      steps:
        - choice:
            when:
              - simple: "${in.body.request.method} == 'put'"
                steps:
                  - log:
                      message: "Processing simple S3 request for put method"
                  - process:
                      ref: s3UploadUrlProcessor
            otherwise:
              steps:
                - log:
                      message: "Processing complex S3 request. Sub-route needed"
                - to:
                    uri: "direct:s3ComplexFiles"